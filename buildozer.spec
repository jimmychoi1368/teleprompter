# =============================================================================
# Buildozer 配置文件 - English Teleprompter
# =============================================================================
# 版本：v6.0
# 修复：android.bootstrap 已弃用，改为 p4a.bootstrap
# =============================================================================

[app]

# -----------------------------------------------------------------------------
# 应用基本信息
# -----------------------------------------------------------------------------
title = English Teleprompter
package.name = teleprompter
package.domain = org.teleprompter
version = 1.0.0

# -----------------------------------------------------------------------------
# 源代码配置
# -----------------------------------------------------------------------------
source.dir = .
source.main = main.py
source.include_exts = py,png,jpg,kv,atlas,json,fst,conf,bin,txt,md,scorer
source.include_patterns = assets/*,images/*,vosk-model-small-en-us-0.15/*
source.exclude_dirs = tests,bin,.git,.github,__pycache__,.venv,.buildozer

# -----------------------------------------------------------------------------
# 屏幕配置
# -----------------------------------------------------------------------------
orientation = portrait
fullscreen = 0

# -----------------------------------------------------------------------------
# Python依赖（暂不含vosk，vosk需要单独集成）
# -----------------------------------------------------------------------------
requirements = python3,kivy==2.2.1,pyjnius,android

# -----------------------------------------------------------------------------
# Android API 版本配置
# android.api 必须与安装的 platforms;android-xx 一致
# -----------------------------------------------------------------------------
android.api = 33
android.minapi = 24
android.ndk = 25c
android.build_tools = 33.0.2

# -----------------------------------------------------------------------------
# 目标架构
# -----------------------------------------------------------------------------
android.archs = arm64-v8a

# -----------------------------------------------------------------------------
# 权限声明
# -----------------------------------------------------------------------------
android.permissions = RECORD_AUDIO,BLUETOOTH,BLUETOOTH_ADMIN,BLUETOOTH_CONNECT,BLUETOOTH_SCAN,MODIFY_AUDIO_SETTINGS,INTERNET

# -----------------------------------------------------------------------------
# Python-for-Android 配置
# 修复日志警告：android.bootstrap is deprecated, rename to p4a.bootstrap
# -----------------------------------------------------------------------------
p4a.bootstrap = sdl2

# -----------------------------------------------------------------------------
# SDK许可和路径
# -----------------------------------------------------------------------------
android.accept_sdk_license = True
android.sdk_path = /usr/local/lib/android/sdk
android.ndk_path = /usr/local/lib/android/sdk/ndk/25.2.9519653

# -----------------------------------------------------------------------------
# 其他配置
# -----------------------------------------------------------------------------
android.allow_backup = True

# =============================================================================
# Buildozer 配置
# =============================================================================

[buildozer]

log_level = 2
warn_on_root = 0
build_dir = ./.buildozer
bin_dir = ./bin
